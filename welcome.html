<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>HOME | Portal KUA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f3f3f3; }
        .post-card img { height: 180px; object-fit: cover; }
        .post-card { transition: 0.2s; }
        .post-card:hover { transform: scale(1.02); }
    </style>
</head>

<body class="p-4">

<h1 class="mb-4">Postingan Terbaru</h1>

<div id="posts" class="row gy-4">
    <!-- Post akan muncul otomatis -->
</div>

<script>
// Daftar file posting (manual test — nanti gua bikin auto-scan folder)
const postFiles = [
    "posts/post1.html",
];

async function loadPost(path) {
    const res = await fetch(path);
    const text = await res.text();

    // ambil YAML metadata
    const yamlMatch = text.match(/---([\s\S]*?)---/);
    if (!yamlMatch) return;

    const yaml = yamlMatch[1].trim();
    const body = text.replace(yamlMatch[0], "").trim();

    const meta = {};
    yaml.split("\n").forEach(line => {
        const [k, ...v] = line.split(":");
        meta[k.trim()] = v.join(":").trim().replace(/"/g, "");
    });

    // masukkan ke card
    const postsDiv = document.getElementById("posts");
    postsDiv.innerHTML += `
        <div class="col-md-4">
            <div class="card post-card shadow-sm">
                <img src="${meta.thumbnail}" class="card-img-top">
                <div class="card-body">
                    <small class="text-muted">${meta.date} • ${meta.category}</small>
                    <h5 class="card-title mt-2">${meta.title}</h5>
                    <a href="${path}" class="btn btn-success btn-sm mt-2">Baca Selengkapnya</a>
                </div>
            </div>
        </div>
    `;
}

postFiles.forEach(loadPost);
</script>

</body>
</html>
